- installer raspbian https://www.raspberrypi.org/documentation/installation/installing-images/linux.md

df -h
unmount des partitions
dd bs=4M if=2015-09-24-raspbian-jessie.img of=/dev/mmcblk0
ssh pi@IP 
sudo raspi-config
expand filesystem, change password, change locale, 

- install subsonic
sudo dpkg -i subsonic-5.2.1.deb

!!!!!ne pas oublier la licence subsonic
aller sur localhost:4040, se logger avec admin/admin
	configurer votre dossier de music 
	nb : pour avoir accès aux pochettes il faut que les morceaux se trouvent chacun dans leur répertoire, les pochettes des albums étant liés au répertoire (si non trouvées automatiquement on peut cliquer sur change depuis l'ui)
	créer une playlist "myjukebox", le nom est important, et ajoutez y vos morceaux (cochez les morceaux et choisissez "add to playlist", puis sélectionner "myjukebox")
SI AU BOUT DE 30 jours pas enregistré alors on peut plus interrogé l'API 
IMPORTANT!
dans l'ui cliquer sur get subsonci premium et entrer mail + clé


pour uploader des morceaux passer par l'icone More et en bas y a un lien upload, il y a dezip automatique
donc on peut tenter de charger des reps d'un coup sous un seul zip?

- git clone du projet
git clone https://glaphil@bitbucket.org/glaphil/myjukebox.git

- install python libs et libudev-dev
# deja dans raspbian
# sudo apt-get install python3-pip
# sudo pip3 install RPi.GPIO

sudo apt-get install libudev-dev
sudo pip3 install python-uinput
sudo pip3 install evdev

IIMPORTANT il faut une version rpio gpio à jour
sudo apt-get update && sudo apt-get install python-rpi.gpio python3-rpi.gpio



- pour lancer ne pas oublier le sudo modprobe uinput

nb : ne fonctionne que lorsqu'un écran est branché

- installer iceweasel (équivalent firefox) -> + rapide que le nav de base (mise en cache des pochettes etc...)
sudo apt-get install iceweasel


lancement important
sudo modprobe uinput
sudo pigpiod
sudo python3 buttonsToKeysWithCallbacks.py

modif : 
pigpio marche mieux (pas dispo sur les dépots python je crois Available on PyPi: NO)
http://abyz.co.uk/rpi/pigpio/download.html


wget abyz.co.uk/rpi/pigpio/pigpio.zip
unzip pigpio.zip
cd PIGPIO
make
sudo make install

# To start the pigpio daemon
sudo pigpiod

# pas besoin de faire un pip install car j'ai l'impression que ça install aussi la partie python


https://www.raspberrypi.org/forums/viewtopic.php?t=8298&p=210611

#

wifi
apres avoir choisi le réseau via l'icone

dans /etc/network/interfaces
remplacer 
(iface eth0 inet manual
iface wlan inet manual
par
iface eth0 inet dhcp
iface wlan inet dhcp
puis redémarrer réseau avec /etc/init.d/networking restart

#

active numlock

sudo apt-get install numlockx
sudo vi /etc/X11/xinit/xinitrc
pour ajouter 

if [ -x /usr/bin/numlockx ];
then
    /usr/bin/numlockx on
fi

et redémarrer

#

plugin full screen pour iceweasel
https://addons.mozilla.org/en-us/firefox/addon/r-kiosk/
attention pour le desactiver il faut lancer iceweseal en safe mode 
iceweseal -safe-mode

lancement automatique iceweseal

ajouter au fichier suivant 

sudo vi /etc/xdg/lxsession/LXDE/autostart

@sudo modprobe uinput
@sudo pigpiod
@sudo python3 /home/pi/myjukebox/python/buttonsToKeysWithCallbacks.py
@iceweasel file:///home/pi/myjukebox/index.html


TODO : faire marcher démarrage script + iceweasel 
désactiver le screensaver (vérifier si pression sur un des boutons le réactive)
désactiver curseur souris

concernant le démarrage long  "A start job is running for LSB: Raise network interfaces"
https://debian-facile.org/viewtopic.php?id=10214
mais à prior que avec le dongle usb branché


ATTENTION AVANT PREMIER LANCEMENT
il faut lancer une appli audui pour forcer l'utilisation du casque (ex un des jeux)
le navigateur provoque pas ce choix
